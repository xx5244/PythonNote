# Pandas
---

+ ## 結構化數據分析利器(依賴Numpy)
+ ## 提供多種高級數據結構
    1. Time-Series
    2. DataFrame
    3. Panel
+ ## 強大數據索引和處理能力

+ ## Series
  + ### 說明
    **Pandas套件底下的方法，一維維度的表格，以list為基底**
  + ### 範例
    ```python
    import numpy as np
    import pandas as pd

    a = [1, 2, 3, 4]

    # 創建一個Series
    # s = pd.Series(a)
    # print(s)  # 印出內容
    # print(s.index)    # 印出索引
    # print(s.values)   # 印出值
    # print("索引1的值:", s[1]) # 索引方式印出值
    # print("最大值:", s.max())
    # print("最小值:", s.min())
    # print("中位數:", s.median())
    # print("資料放大兩倍:", s * 2, sep="\n")

    # 篩選資料
    # condition = s > 2
    # print("內容值大於2的內容:", s[condition], sep="\n")


    # 自定義index
    # s1 = Series(a, index=['A', 'B', 'C', 'D'])
    # print(s1)

    # 透過numpy的array創建Series
    # s2 = Series(np.arange(5))
    # print(s2)

    # 透過字典創建Series
    # d = {
    #     'A': 1,
    #     'B': 2,
    #     'C': 3,
    #     'D': 4
    # }
    # s3 = pd.Series(d)
    # print(s3)
    # print(s3.index)
    # print(s3.values)

    # 將Series轉換成字典
    # d2 = s3.to_dict()
    # print(d2)


    """
    index會默認自動創建，也可以指定
    用字典創建的Series，字典中的key會變成index，而value就會變成value
    將Series轉成字典的話，就是index轉乘key，value轉成value
    """
    ```

+ ## DataFrame
  + ### 說明
    **Pandas套件底下的方法，二維維度的表格，以dict為基底**
  + ### 範例
    ```python
    import pandas as pd
    from pandas.core.frame import DataFrame

    a = [1, 2, 3, 4]

    # 創建一個DataFrame
    ind = ['a', 'b', 'c']
    data_dict = {
        'name': ['Amy', 'John', 'David'],
        'salary': [3000, 5000, 8000],
        'heigh': [180, 190, 230]
    }

    data = pd.DataFrame(data_dict)
    data2 = pd.DataFrame(data_dict, index=ind)  # 指定index

    # print(data)
    # print(f'{"="*30}')
    # print(data2)


    # row相關
    # print(data.head()) # 顯示前5 row
    # print(data.tail()) # 顯示後5 row

    ## 找欄位中特定字串
    # condition = data['name'].str.contains('John', case=False)   # 
    # print("John的資料", data[condition], sep='\n')

    ## 取row的內容
    # print(data[1:2])
    # print(data.loc[1])

    ## 新增row(新增至最尾端)
    # data.loc[3] = ['tester', 1000000, 199]
    # print(data)

    data = data.append(['tester', 1000000, 199])
    print(data)

    # column相關
    ## 讀取column內容
    # print(data['name'])
    # print(data.name)  # 不建議使用此方法
    ## 讀取多column內容
    # print(DataFrame(data, columns=['name', 'heigh']))

    # print("薪水平均值:", data['salary'].mean())
    # print('欄位名:', data.columns)

    ## 新增欄位(新增至最尾端)
    # data['new'] = [100, 300, 800]
    # print(data)
    # data['new'] = pd.Series([100, 300])
    # print(data)


    ## 新增欄位(插入至想要的Column處)
    # data.insert(1, 'name', [100, 300, 800], allow_duplicates=True)
    # print(data)


    # 其他常用屬性及方法
    ## row column 雙重篩選
    # print(data.loc[0:2, ['name', 'salary']])
    # print(data.iloc[0:3, 0:2])

    ## 刪除row column
    # data.drop(index=[1, 2], inplace=True, axis=False)
    # data.drop(columns=['name', 'salary'], inplace=True, axis=True)
    # print(data)

    ## 串接
    # print(pd.concat([data, data], axis=0))  # row串接
    # print(pd.concat([data, data], axis=1))  # column串接

    # print("data的尺寸為", data.shape)
    # data.to_csv('test.csv', encoding='utf-8', index=None)   # 輸出成csv檔
    # print(pd.read_csv('test.csv', header=None)) # 讀取csv檔


    """
    讀取row內容有兩種方法
    法1. 用區間的方式表示欲讀取的row index
    法2. 直接輸入欲讀取的row index
    輸出觀看的方法樣式不同

    新增row方法
    法1. data.loc[index名] = 值，index名可數字可文字，給予的值需符合column的長度
    法2.

    讀取欄位內容有兩種方法
    法1. data['欄位名']
    法2. data.'欄位名' - 此方法不建議使用，因為欄位名要是有空格就無法用了

    新增欄位有三種方法
    法1. 直接新增到最尾端，給予的值需符合row的長度
    法2. 直接新增到最尾端，給予的值不需符合row的長度，少的部分會是NaN值，注意: 如果有NaN值，那其它為數字的話，資料型態會是float64
    法3. 插入的方法新增，給予的值需符合row的長度，allow_duplicates預設為False，此為是否允許插入同樣欄位名

    shape: DataFrame的尺寸，m(row) * n(column)
    str.contains: 找欄位中特定字串，case為是否在意大小寫，False為不在意大小寫
    to_csv: 輸出成csv檔，當然也可以輸出成別的檔案類型，編碼建議用utf-8，index預設是有的，如果不要就要設定為None
    read_csv: 讀取csv檔變成DataFrame形式，header為是否把第一列當作是屬性，預設為是，如不要就要設定為None

    雙重篩選有兩種方法
    法1. 用loc，注意:此法row的區間表示尾數是有包含的喔，column篩選部分是用欄位名
    法2. 用iloc，注意:此法row的區間表示尾數是不包含，與一般python表示相同，column篩選部分是用數字

    drop: 刪除row/column，index可以指定要刪除的row，columns則是指定要刪除的column，axis為0(預設)則刪除row；1為刪除column，inplace為1是直接刪除動作無法返回，預設為False
    concat: 合併兩個DataFrame，axis為0(預設)是row合併，1則是column合併，注意:只能0或1不能True跟False喔，另外，如果index不同的話，column合併會是row+column合併喔
    """
    ```
+ ## 參考資料